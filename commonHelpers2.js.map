{"version":3,"file":"commonHelpers2.js","sources":["../src/js/gallery.js"],"sourcesContent":["import iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\nimport SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\n\ndocument.addEventListener(\"DOMContentLoaded\", () => {\n    const searchBar = document.getElementById(\"searchBar\");\n    const searchButton = document.getElementById(\"searchButton\");\n    const loadMoreButton = document.getElementById(\"loadMoreButton\");\n    const gallery = document.getElementById(\"gallery\");\n    const loader = document.querySelector('.loader');\n    \n    let page = 1;\n    let currentSearchTerm = '';\n    let totalHits = 0;\n    let displayedHits = 0;\n\n    searchButton.addEventListener(\"click\", async (event) => {\n        event.preventDefault();\n        loader.style.opacity = 1; \n        loader.style.display = 'block'; \n        loadMoreButton.style.display = 'none'; \n\n        const q = searchBar.value.trim();\n        if (q === '') {\n            iziToast.show({\n                title: 'Input Required',\n                message: 'Please enter a search term.',\n                color: 'yellow'\n            });\n            loader.style.display = 'none';\n            loader.style.opacity = 0; \n            return;\n        }\n\n        if (q !== currentSearchTerm) {\n            page = 1;\n            currentSearchTerm = q;\n            gallery.innerHTML = '';\n            totalHits = 0;\n            displayedHits = 0;\n        }\n\n        const orientation = \"horizontal\";\n        const safesearch = \"true\";\n        const apiKey = \"44886630-c76369955f218994c10c946a0\";\n        const per_page = 40; \n\n        const url = `https://pixabay.com/api/?key=${apiKey}&q=${encodeURIComponent(q)}&image_type=photo&orientation=${orientation}&safesearch=${safesearch}&page=${page}&per_page=${per_page}`;\n\n        try {\n            const response = await fetch(url);\n            const data = await response.json();\n\n            if (data.hits.length === 0) {\n                iziToast.show({\n                    title: 'No results',\n                    message: 'Sorry, there are no images matching your search query. Please try again!',\n                    color: 'white'\n                });\n            } else {\n                totalHits = data.totalHits;\n                displayedHits += data.hits.length;\n                displayImages(data.hits);\n                if (displayedHits < totalHits) {\n                    loadMoreButton.style.display = 'block'; \n                } else {\n                    iziToast.show({\n                        title: 'End of Results',\n                        message: \"We're sorry, but you've reached the end of search results.\",\n                        color: 'white'\n                    });\n                }\n                page++;  \n            }\n\n            searchBar.value = ''; \n        } catch (error) {\n            console.error('Error fetching data:', error);\n            iziToast.show({\n                title: 'Error',\n                message: 'Failed to fetch images. Please try again later.',\n                color: 'red'\n            });\n        } finally {\n            loader.style.display = 'none';\n            loader.style.opacity = 0; \n        }\n    });\n\n    loadMoreButton.addEventListener(\"click\", async () => {\n        if (currentSearchTerm === '') {\n            iziToast.show({\n                title: 'Input Required',\n                message: 'Please enter a search term.',\n                color: 'yellow'\n            });\n            return;\n        }\n\n        loader.style.display = 'block'; \n\n        const orientation = \"horizontal\";\n        const safesearch = \"true\";\n        const apiKey = \"44886630-c76369955f218994c10c946a0\";\n        const per_page = 20;\n\n        const url = `https://pixabay.com/api/?key=${apiKey}&q=${encodeURIComponent(currentSearchTerm)}&image_type=photo&orientation=${orientation}&safesearch=${safesearch}&page=${page}&per_page=${per_page}`;\n\n        try {\n            const response = await fetch(url);\n            const data = await response.json();\n\n            if (data.hits.length === 0) {\n                iziToast.show({\n                    title: 'No results',\n                    message: 'Sorry, there are no more images matching your search query.',\n                    color: 'white'\n                });\n                loadMoreButton.style.display = 'none'; \n            } else {\n                displayedHits += data.hits.length;\n                displayImages(data.hits);\n                if (displayedHits >= totalHits) {\n                    loadMoreButton.style.display = 'none'; \n                    iziToast.show({\n                        title: 'End of Results',\n                        message: \"We're sorry, but you've reached the end of search results.\",\n                        color: 'white'\n                    });\n                } else {\n                    page++;  \n                }\n            }\n        } catch (error) {\n            console.error('Error fetching data:', error);\n            iziToast.show({\n                title: 'Error',\n                message: 'Failed to fetch images. Please try again later.',\n                color: 'red'\n            });\n        } finally {\n            loader.style.display = 'none';\n        }\n    });\n\n    function displayImages(images) {\n        const fragment = document.createDocumentFragment();\n        images.forEach(image => {\n            const imageCard = document.createElement('div');\n            imageCard.classList.add('image-card');\n            imageCard.innerHTML = `\n                <a href=\"${image.largeImageURL}\" class=\"gallery-link\">\n                    <img src=\"${image.webformatURL}\" alt=\"${image.tags}\">\n                </a>\n                <div class=\"image-info\">\n                    <p><strong>Likes:</strong> ${image.likes}</p>\n                    <p><strong>Views:</strong> ${image.views}</p>\n                    <p><strong>Comments:</strong> ${image.comments}</p>\n                    <p><strong>Downloads:</strong> ${image.downloads}</p>\n                </div>\n            `;\n            fragment.appendChild(imageCard);\n        });\n\n        gallery.appendChild(fragment);\n        const lightbox = new SimpleLightbox('.gallery-link');\n        lightbox.refresh();\n\n        const firstImageCard = document.querySelector('.image-card');\n        if (firstImageCard) {\n            const { height } = firstImageCard.getBoundingClientRect();\n            window.scrollBy({\n                top: height * 2,\n                behavior: 'smooth'\n            });\n        }\n    }\n});"],"names":["searchBar","searchButton","loadMoreButton","gallery","loader","page","currentSearchTerm","totalHits","displayedHits","event","q","iziToast","orientation","safesearch","apiKey","per_page","url","data","displayImages","error","images","fragment","image","imageCard","SimpleLightbox","firstImageCard","height"],"mappings":"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"}